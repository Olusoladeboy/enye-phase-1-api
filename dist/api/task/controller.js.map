{"version":3,"sources":["../../../src/api/task/controller.js"],"names":["module","logger","log4js","getLogger","log","req","err","error","method","user","path","message","fetchRecord","res","query","result","info","length","createRecord","data","body","code","id","updateRecord","recordId","params","patchRecord","deleteRecord"],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\n/* eslint-disable object-curly-newline */\nimport { success, fail, safeGet, log4js, getRequestIp, generateCode } from '../../util';\nimport { createService, deleteService, fetchService, updateService } from './service';\n\n// Logging\nconst module = 'Task';\nconst logger = log4js.getLogger(`[${module}]`);\nfunction log(req, err) {\n  logger.error(`[400] [${getRequestIp(req)}] [${req.method}] [${safeGet(req.user, 'email')}] - [${req.path}], [${module}], ${err.message}`);\n}\n\nexport async function fetchRecord(req, res) {\n  try {\n    const { query } = req;\n    const result = await fetchService(query);\n    logger.info(`[200] [${getRequestIp(req)}] [${req.method}] [${safeGet(req.user, 'email')}] - [${req.path}]`);\n    return success(res, 200, result, `${result.length} ${module} record(s) retrieved successfully!`);\n  } catch (err) {\n    log(req, err);\n    return fail(res, 400, `Error retrieving ${module} record. ${err.message}`);\n  }\n}\n\nexport async function createRecord(req, res) {\n  try {\n    const data = req.body;\n    data.code = generateCode(req.user.id, 10);\n    const result = await createService(data);\n    return success(res, 201, result, `${module} record(s) created successfully!`);\n  } catch (err) {\n    log(req, err);\n    return fail(res, 400, `Error creating ${module} record. ${err.message}`);\n  }\n}\n\nexport async function updateRecord(req, res) {\n  const data = req.body;\n  const { recordId } = req.params;\n  try {\n    const result = await updateService(recordId, data);\n    return success(res, 200, result, `${module} record(s) updated successfully!`);\n  } catch (err) {\n    log(req, err);\n    return fail(res, 400, `Error updating ${module} record. ${err.message}`);\n  }\n}\n\nexport async function patchRecord(req, res) {\n  try {\n    const data = req.body;\n    const { recordId } = req.params;\n    const result = await updateService(recordId, data);\n    return success(res, 200, result, `${module} record(s) patched successfully!`);\n  } catch (err) {\n    log(req, err);\n    return fail(res, 400, `Error patching ${module} record. ${err.message}`);\n  }\n}\n\nexport async function deleteRecord(req, res) {\n  try {\n    const { recordId } = req.params;\n    const result = await deleteService(recordId);\n    return success(res, 200, result, `${module} record(s) deleted successfully!`);\n  } catch (err) {\n    log(req, err);\n    return fail(res, 400, `Error deleting ${module} record. ${err.message}`);\n  }\n}\n"],"file":"controller.js"}
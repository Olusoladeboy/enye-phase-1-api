{"version":3,"sources":["../../src/util/helpers.js"],"names":["safeGet","obj","prop","Object","assign","toObjectId","baseId","mysqlId","oldId","toString","a","length","repeat","generateObjectId","terminal","presently","Date","now","last3Chars","substr","str1","genString","str2","id","setLimit","inputlimit","limit","parseInt","isNaN","pmtName","timestamp","toISOString","slice","dateDaysAgo","since","today","setDate","getDate","randomNum","Math","floor","random","cloneObject","model","source","getObjectByKey","arrayObject","key","value","find","getSettings","arrObj","Obj","item","name","addToArrayOfObjects","arrayOfObjects","newObjectElement","size","keys","push","splice","getClientAccess","req","ipAddress","ip","_remoteAddress","accessDate","_startTime","isRealValue","object","hasProp","undefined","isObjecId","match","generateOtp","num","hash","str","bcryptjs","hashSync","JWT","saltRounds","cleanDeepObject","propName","depth","cleanObject","removeDuplicates","arrayOfObj","setOfSeenObj","Set","filteredArr","filter","duplicate","has","add","nextDate","d","givenDate","possible","text","i","charAt","daysIntoYear","date","UTC","getFullYear","getMonth","genCode","len","generateCode","terminalId","hasNull","val","values","includes","formatPhone","phone","trim","stringToArrayPhone","arr","split","map","st","filtered","index","getRequestIp","request","ipAddr","connection","remoteAddress","headers","getFullname","record","title","gender","toLowerCase","surname","otherName","titleCase","word","toUpperCase","join","calcTax","taxableIncome","income","taxTotal","taxable","tax"],"mappings":"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","sourcesContent":["/* eslint-disable prefer-object-spread */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-param-reassign */\n/* eslint-disable arrow-parens */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-mixed-operators */\nimport bcryptjs from 'bcryptjs';\nimport { JWT } from '../constants';\n\nexport function safeGet(obj = {}, prop) {\n  return Object.assign({}, obj)[prop] || '';\n}\n\nexport function toObjectId(baseId = '5951bc91860d8b5ba', mysqlId = 1) {\n  const oldId = mysqlId.toString(10);\n  const a = (oldId.length < 7) ? '0'.repeat(7 - oldId.length) : '0';\n  return baseId + a + oldId;\n}\n\n/**\n * generateObjectId() creates a uuid for a record using the terminalId\n * @param {string} terminal ObjectId\n */\nexport function generateObjectId(terminal = '5c51bc91860d8b5bc0000001') {\n  const presently = Date.now();\n  const last3Chars = terminal.substr(terminal.length - 3);\n  const str1 = genString(4, 'abcdef');\n  const str2 = genString(4, 'abcdef');\n  const id = str1 + presently + str2 + last3Chars;\n  return id;\n}\n\nexport function setLimit(inputlimit) {\n  const limit = parseInt(inputlimit, 10);\n  // eslint-disable-next-line no-restricted-globals\n  return (isNaN(limit) || limit == null || limit > 5000 || limit === 0) ? 5000 : limit;\n}\n\nexport function pmtName(mysqlId) {\n  if (mysqlId) {\n    const oldId = mysqlId.toString(10);\n    const a = '0'.repeat(4 - oldId.length);\n    return a + oldId;\n  }\n  return mysqlId;\n}\n\nexport function timestamp() {\n  return `${new Date().toISOString().slice(0, 22)}Z`;\n  //   return new Date().toISOString().slice(0, 19).replace(\"T\", \" \")+\"Z\";\n}\n\nexport function dateDaysAgo(since = 0) {\n  const today = new Date();\n  today.setDate(today.getDate() - since);\n  return today.toISOString();\n}\n\nexport function randomNum() {\n  return Math.floor(Math.random() * 1000000);\n}\n\nexport function cloneObject(model = {}, source) {\n  return Object.assign(model, source);\n}\n\n/**\n * @description getObjectByKey returns the object from an Array of\n * Objects that has the key with a given value or undefined!\n * @param {Array} arrayObject Array of Objects\n * @param {String} key Object key could be a String or Integer\n * @param {String} value Object value could be a String or Integer\n */\nexport function getObjectByKey(arrayObject, key, value) {\n  return arrayObject.find(obj => obj[key] === value);\n}\n\nexport function getSettings(arrObj = [{}], value = '') {\n  const Obj = arrObj.find(item => item.name === value);\n  if (Obj) {\n    return Obj.value;\n  }\n  return 0;\n}\n\n/**\n * @description addToArrayOfObjects add a new object item to an array of objects\n * @param {Object} arrayOfObjects the array of object\n * @param {Number} limit maximum number of objects the array should not exceed\n * @param {Object} newObjectElement the new item to be added to the array of objects\n * @returns {Object} the new array of Objects\n */\nexport default function addToArrayOfObjects(arrayOfObjects, limit, newObjectElement) {\n  const size = Object.keys(arrayOfObjects).length;\n  if (size < limit) {\n    arrayOfObjects.push(newObjectElement);\n  } else {\n    // arr.splice(indexToRemove, numToRemove)\n    arrayOfObjects.splice(0, 1);\n    arrayOfObjects.push(newObjectElement);\n  }\n  return arrayOfObjects;\n}\n\n/**\n * @description getClientAccess get the Ip Address and TimeSTamp of a request object.\n * @param {String} req the request object\n * @returns {Object} { accessDate, ipAddress } access date and the ip address\n */\nexport function getClientAccess(req) {\n  const ipAddress = req.ip || req._remoteAddress;\n  // const lang = req.get(\"accept-language\");\n  const accessDate = req._startTime || '';\n  return { accessDate, ipAddress };\n}\n\nexport function isRealValue(object) {\n  return typeof object !== 'undefined' || object !== null;\n}\n\nexport function hasProp(obj, prop) {\n  if (!isRealValue(obj)) return false;\n  return (obj[prop] !== undefined);\n  // return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function isObjecId(id) {\n  if (id.match(/^[0-9a-fA-F]{24}$/)) return true;\n  return false;\n}\n\n/**\n * @returns a six-digit random number\n */\nexport function generateOtp() {\n  const num = Math.floor(Math.random() * 900000) + 100000;\n  return num;\n}\n\nexport function hash(str = '') {\n  return bcryptjs.hashSync(str, JWT.saltRounds);\n}\n\nexport function cleanDeepObject(obj) {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const propName in obj) {\n    if (!obj[propName] || obj[propName].length === 0) {\n      delete obj[propName];\n    } else if (typeof obj === 'object') {\n      cleanDeepObject(obj[propName]);\n    }\n  }\n  return obj;\n}\n\nlet depth = 0;\n\n// eslint-disable-next-line complexity\nexport function cleanObject(obj) {\n  depth += 1;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const propName in obj) {\n    if (!obj[propName] || obj[propName].length === 0) {\n      delete obj[propName];\n    } else if (typeof obj === 'object') {\n      if (depth <= 3) cleanObject(obj[propName]);\n    }\n  }\n  return obj;\n}\n\n/**\n * @description a function that removes duplicates from an array of objects\n * @param {Array} arrayOfObj an array of objects with duplicate value for\n *  a given property\n * @param {String} prop the property with duplicate values that renneds to be filtered by\n */\nexport function removeDuplicates(arrayOfObj, prop) {\n  const setOfSeenObj = new Set();\n  const filteredArr = arrayOfObj.filter((item) => {\n    const duplicate = setOfSeenObj.has(item[prop]);\n    setOfSeenObj.add(item[prop]);\n    return !duplicate;\n  });\n  return filteredArr;\n}\n\nexport function nextDate(d = 1, givenDate = new Date().toISOString()) {\n  return new Date(new Date(givenDate).setDate(new Date(givenDate).getDate() + d));\n}\n\nfunction genString(length, possible = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789') {\n  let text = '';\n  const str = possible || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < length; i++) {\n    text += str.charAt(Math.floor(Math.random() * str.length));\n  }\n  return text;\n}\n\nfunction daysIntoYear(date = new Date()) {\n  // eslint-disable-next-line max-len\n  return (Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()) - Date.UTC(date.getFullYear(), 0, 0)) / 24 / 60 / 60 / 1000;\n}\n\nexport function genCode(len = 9) {\n  let d = new Date().getFullYear().toString().substr(-2);\n  d += daysIntoYear();\n  if (len - d.length > 0) {\n    return d + genString(len - d.length);\n  }\n  return genString(len);\n}\n\nexport function generateCode(terminalId, len = 10) {\n  let d = new Date().getFullYear().toString().substr(-1);\n  d += daysIntoYear();\n  d += terminalId.substr(-2);\n  if (len - d.length > 0) {\n    return d + genString(len - d.length, '0987654321');\n  }\n  return genString(len, '0987654321');\n}\n\nexport function hasNull(Obj = {}) {\n  const val = Object.values(Obj);\n  if (val.includes(null) || val.includes(undefined) || val.includes('')) return true;\n  return false;\n}\n\nexport function formatPhone(phone) {\n  if (!phone) return null;\n  let str = phone.trim();\n  if (str.length === 11 && str[0] === '0') {\n    str = `+234${str.slice(1)}`;\n  }\n  if (str.length === 10) {\n    str = `+234${str}`;\n  }\n  return str;\n}\n\nexport function stringToArrayPhone(str) {\n  const arr = str.split(',').map(st => st.trim()) || []; // remove spaces\n  // eslint-disable-next-line no-unused-vars\n  const filtered = arr.filter((value, index) => (value.length >= 11 && value.length < 15));\n  return [...new Set(filtered)]; // Remove duplicates\n}\n\nexport function getRequestIp(request) {\n  let ipAddr = request.connection.remoteAddress;\n  if (request.headers && request.headers['x-forwarded-for']) {\n    [ipAddr] = request.headers['x-forwarded-for'].split(',');\n  }\n  return ipAddr;\n}\n\n// eslint-disable-next-line complexity\nexport function getFullname(record) {\n  if (!record) return '';\n  const title = hasProp(record, 'title') ? record.title : '';\n  const gender = hasProp(record, 'gender') ? `(${record.gender.charAt(0).toLowerCase()})` : '';\n  const surname = hasProp(record, 'surname') ? record.surname : '';\n  const otherName = hasProp(record, 'otherName') ? record.otherName : '';\n  return (`${titleCase(`${title} ${surname} ${otherName}`)} ${gender}`).trim();\n}\n\nexport function titleCase(str) {\n  return str.toLowerCase().split(' ').map(word => (word.charAt(0).toUpperCase() + word.slice(1))).join(' ');\n}\n\n// eslint-disable-next-line complexity\nexport function calcTax(taxableIncome) {\n  let income = taxableIncome;\n  let taxTotal = 0;\n  if (income >= 1) {\n    const taxable = income - 300000 >= 0 ? 300000 : income;\n    const tax = taxable * 7 / 100;\n    taxTotal += tax;\n    income -= taxable;\n  }\n  if (income >= 1) {\n    const taxable = income - 300000 >= 0 ? 300000 : income;\n    const tax = taxable * 11 / 100;\n    taxTotal += tax;\n    income -= taxable;\n  }\n  if (income >= 1) {\n    const taxable = income - 500000 >= 0 ? 500000 : income;\n    const tax = taxable * 15 / 100;\n    taxTotal += tax;\n    income -= taxable;\n  }\n  if (income >= 1) {\n    const taxable = income - 500000 >= 0 ? 500000 : income;\n    const tax = taxable * 19 / 100;\n    taxTotal += tax;\n    income -= taxable;\n  }\n  if (income >= 1) {\n    const taxable = income - 1600000 >= 0 ? 1600000 : income;\n    const tax = taxable * 21 / 100;\n    taxTotal += tax;\n    income -= taxable;\n  }\n  if (income >= 1) {\n    const tax = income * 24 / 100;\n    taxTotal += tax;\n  }\n  return taxTotal;\n}\n"],"file":"helpers.js"}